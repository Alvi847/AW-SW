<div class="admin-panel">
    <h1>Administración de Usuarios</h1>

    <table>
        <thead>
            <tr>
                <th>Username</th>
                <th>Nombre</th>
                <th>Email</th>
                <th>Rol</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
            <% usuarios.forEach(u => { %>
                <tr>
                    <td data-label="Username"><%= u.username %></td>
                    <td data-label="Nombre"><%= u.nombre %></td>
                    <td data-label="Email"><%= u.email %></td>
                    <td data-label="Rol">
                        <% if (u.username !== session.username && u.rol !== 'A') { %>
                            <form action="/usuarios/cambiarRol" method="post">
                                <input type="hidden" name="username" value="<%= u.username %>">
                                <label>
                                    <input type="radio" name="rol" value="U" <%= u.rol === 'U' ? 'checked' : '' %>> Usuario
                                </label>
                                <label>
                                    <input type="radio" name="rol" value="A" <%= u.rol === 'A' ? 'checked' : '' %>> Admin
                                </label>
                                <button type="submit">Cambiar rol</button>
                            </form>
                        <% } else { %>
                            <%= u.rol === 'A' ? 'Admin' : 'Usuario' %>
                        <% } %>
                    </td>
                    <td data-label="Acciones">
                        <% if (u.username !== session.username && u.rol !== 'A') { %>
                            <form action="/usuarios/removeUsuario" method="post"
                                onsubmit="return confirm('¿Seguro que quieres eliminar este usuario?');">
                                <input type="hidden" name="username" value="<%= u.username %>">
                                <button type="submit">Eliminar</button>
                            </form>
                        <% } %>
                    </td>
                </tr>
            <% }); %>
        </tbody>
        
    </table>
</div>

